{
    "id": "uipath-managementcluster-troubleshooting",
    "title": "UiPath ManagementCluster Custom Resource Troubleshooting",
    "category": "troubleshooting",
    "tags": [
        "managementcluster",
        "uipath",
        "dedicated",
        "vcluster",
        "management",
        "cluster"
    ],
    "summary": "Troubleshooting UiPath ManagementCluster custom resources (dedicated.uipath.com)",
    "states": {
        "ManagementClusterReady": "Management cluster is fully operational and ready",
        "Provisioning": "Management cluster is being created",
        "Failed": "Management cluster creation or operation failed"
    },
    "common_causes": [
        {
            "cause": "Not reaching Ready state",
            "description": "ManagementCluster stuck in provisioning",
            "diagnosis": "kubectl describe managementcluster <name> -n <namespace>",
            "fix": "Check vCluster pod status, verify host cluster resources"
        },
        {
            "cause": "vCluster issues",
            "description": "Underlying vCluster not healthy",
            "diagnosis": "kubectl get pods -n <namespace> -l app=vcluster",
            "fix": "Check vCluster syncer logs, verify PVC storage"
        },
        {
            "cause": "Resource constraints",
            "description": "Not enough resources on host cluster",
            "diagnosis": "kubectl describe nodes, kubectl top nodes",
            "fix": "Scale host cluster or reduce management cluster resource requests"
        }
    ],
    "diagnostic_commands": [
        "kubectl get managementcluster -A",
        "kubectl describe managementcluster <name> -n <namespace>",
        "kubectl get pods -n <namespace> -l app=vcluster",
        "kubectl logs -n <namespace> -l app=vcluster",
        "kubectl get clusters.cluster.x-k8s.io -n <namespace>"
    ],
    "relationship": {
        "description": "ManagementCluster must be Ready before CustomerCluster can progress",
        "dependency": "CustomerCluster depends on ManagementCluster being healthy"
    },
    "fix_steps": [
        "1. Check ManagementCluster state: kubectl get managementcluster -n <namespace>",
        "2. Describe for conditions and events",
        "3. Verify vCluster pods are running",
        "4. Check vCluster connectivity: vcluster connect",
        "5. Review controller logs for specific errors"
    ]
}